(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{453:function(n,t,e){"use strict";e.r(t);var a=e(2),s=Object(a.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"_21-gas-ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_21-gas-ä¼˜åŒ–"}},[n._v("#")]),n._v(" 21.Gas ä¼˜åŒ–")]),n._v(" "),t("h2",{attrs:{id:"_1ï¸âƒ£-çœé’±æ€»ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-çœé’±æ€»ç»“"}},[n._v("#")]),n._v(" 1ï¸âƒ£ çœé’±æ€»ç»“")]),n._v(" "),t("ul",[t("li",[n._v("ä½¿ç”¨çŸ­è·¯æ¨¡å¼æ¥æ’åºæ“ä½œ")]),n._v(" "),t("li",[n._v("å‡½æ•°ä½¿ç”¨"),t("code",[n._v("external")]),n._v(" + "),t("code",[n._v("calldata")]),n._v(" "),t("ul",[t("li",[n._v("å¯¹ "),t("code",[n._v("memory")]),n._v(" ç±»å‹çš„å‚æ•°ï¼Œä½¿ç”¨ "),t("code",[n._v("external")]),n._v(" å¹¶ä¸”å‚æ•°æ ‡æ³¨ "),t("code",[n._v("calldata")]),n._v(" æ˜¯æœ€çœé’±çš„ã€‚")])])]),n._v(" "),t("li",[n._v("ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç±»å‹\n"),t("ul",[t("li",[n._v("gas ç”±å°åˆ°å¤§: å€¼ç±»å‹ "),t("code",[n._v("<")]),n._v(" å¼•ç”¨ç±»å‹")])])]),n._v(" "),t("li",[n._v("å¾ªç¯ä¸­ä¸æ“ä½œ "),t("code",[n._v("storage")]),n._v(" å˜é‡")]),n._v(" "),t("li",[n._v("å¾ªç¯ä¸­çš„ä¸é‡å¤è®¡ç®—æ•°æ®\n"),t("ul",[t("li",[n._v("èƒ½ä¸åœ¨å¾ªç¯ä¸­æ“ä½œçš„æ•°æ®ï¼Œå°±å°½é‡æ”¾åœ¨å¤–é¢è®¡ç®—")])])]),n._v(" "),t("li",[n._v("å¤šä¸ªå¾ªç¯å¯ä»¥åˆå¹¶å°±å°½é‡åˆå¹¶.(å¾ªç¯å°½é‡ä¸ç”¨)")]),n._v(" "),t("li",[n._v("å¯é¢„æµ‹çš„ç»“æœ,ä¸é€šè¿‡ä»£ç è®¡ç®—ã€‚")]),n._v(" "),t("li",[n._v("é¿å…æ­»ä»£ç ")]),n._v(" "),t("li",[n._v("é¿å…ä¸å¿…è¦çš„åˆ¤æ–­")]),n._v(" "),t("li",[n._v("åˆ é™¤ä¸å¿…è¦çš„åº“")]),n._v(" "),t("li",[n._v("å‡½æ•°ä¸­èƒ½ä¸ retrunï¼Œå°±å°½é‡ä¸ return")]),n._v(" "),t("li",[n._v("åº“åˆçº¦ä½¿ç”¨ using for æ¯”ç›´æ¥ä½¿ç”¨æ›´çœ gas")]),n._v(" "),t("li",[n._v("mapping çš„ key ä½¿ç”¨ bytes32ï¼Œè€Œä¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¯ä»¥çœ Gasï¼›")]),n._v(" "),t("li",[t("code",[n._v("private")]),n._v(" å˜é‡æ¯” "),t("code",[n._v("public")]),n._v("å˜é‡æ›´èŠ‚çœ Gas")])]),n._v(" "),t("h2",{attrs:{id:"_2ï¸âƒ£-ä½¿ç”¨çŸ­è·¯æ¨¡å¼æ¥æ’åºæ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2ï¸âƒ£-ä½¿ç”¨çŸ­è·¯æ¨¡å¼æ¥æ’åºæ“ä½œ"}},[n._v("#")]),n._v(" 2ï¸âƒ£ ä½¿ç”¨çŸ­è·¯æ¨¡å¼æ¥æ’åºæ“ä½œ")]),n._v(" "),t("p",[n._v("çŸ­è·¯ï¼ˆshort-circuitingï¼‰æ˜¯åˆ©ç”¨é€»è¾‘æˆ–("),t("code",[n._v("||")]),n._v("),é€»è¾‘ä¸("),t("code",[n._v("&&")]),n._v(")çš„ç‰¹æ€§ï¼Œæ¥æ’åºä¸åŒæˆæœ¬æ“ä½œçš„å¼€å‘æ¨¡å¼ï¼›æ ¸å¿ƒæ˜¯ "),t("strong",[n._v("å®ƒå°†ä½ gas æˆæœ¬çš„æ“ä½œæ”¾åœ¨å‰é¢ï¼Œé«˜ gas æˆæœ¬çš„æ“ä½œæ”¾åœ¨åé¢")]),n._v("ï¼›è¿™æ ·å¦‚æœå‰é¢çš„ä½æˆæœ¬æ“ä½œä¸å¯è¡Œï¼Œå°±å¯ä»¥è·³è¿‡ï¼ˆçŸ­è·¯ï¼‰åé¢çš„é«˜æˆæœ¬ä»¥å¤ªåŠæ“ä½œäº†ã€‚")]),n._v(" "),t("ul",[t("li",[n._v("å‰é¢åˆ¤æ–­ä¸º trueï¼Œæ‰§è¡Œåé¢çš„æ¡ä»¶åˆ¤æ–­")]),n._v(" "),t("li",[n._v("å‰é¢åˆ¤æ–­ä¸º falseï¼Œè·³è¿‡åé¢çš„æ¡ä»¶åˆ¤æ–­\n"),t("ul",[t("li",[n._v("è¿™æ ·å°±æŠŠåé¢æ¡ä»¶çš„è¿è¡Œ gas ç»™èŠ‚çœä¸‹æ¥äº†")])])])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// f(x) æ˜¯ä½gasæˆæœ¬çš„æ“ä½œ\n// g(y) æ˜¯é«˜gasæˆæœ¬çš„æ“ä½œ\n\n// æŒ‰å¦‚ä¸‹æ’åºä¸åŒgasæˆæœ¬çš„æ“ä½œ\nf(x) || g(y)\nf(x) && g(y)\n")])])]),t("p",[n._v("è¿™é‡Œå“ªä¸ªåˆ¤æ–­åœ¨å‰é¢ï¼Œå“ªä¸ªåˆ¤æ–­åœ¨åé¢ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥å®‰æ’ã€‚")]),n._v(" "),t("p",[t("strong",[n._v("ä¸‹é¢æ˜¯ä¾‹å­")]),n._v("è¯´æ˜,ä¸€ä¸ªéå¸¸ç®€å•çš„å€¼åˆ¤æ–­:")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ 1:   22050\n    // è¾“å…¥ 2:   22065\n    // è¾“å…¥ 101: 22050\n    // è¾“å…¥ 102: 22055\n    // å¹³å‡å€¼: (22050+22065+22050+22055)/4 = 22055\n    function test1(uint256 _amount) external pure returns (bool) {\n        bool isEven = _amount % 2 == 0;\n        bool isLessThan99 = _amount < 99;\n        if (isEven && isLessThan99) {\n            return true;\n        }\n        return false;\n    }\n\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ 1:   22040\n    // è¾“å…¥ 2:   22061\n    // è¾“å…¥ 101: 22040\n    // è¾“å…¥ 102: 22051\n    // å¹³å‡å€¼: (22040+22061+22040+22051)/4 = 22048\n    function test2(uint256 _amount) external pure returns (bool) {\n        if (_amount % 2 == 0 && _amount < 99) {\n            return true;\n        }\n        return false;\n    }\n\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ 1:   22073\n    // è¾“å…¥ 2:   22083\n    // è¾“å…¥ 101: 21881\n    // è¾“å…¥ 102: 21881\n    // å¹³å‡å€¼: (22073+22083+21881+21881)/4 = 21979.5 âœ… å¹³å‡å€¼æœ€ä½\n    function test3(uint256 _amount) external pure returns (bool) {\n        if (_amount < 99 && _amount % 2 == 0) {\n            return true;\n        }\n        return false;\n    }\n}\n")])])]),t("h2",{attrs:{id:"_3ï¸âƒ£-å‡½æ•°ä½¿ç”¨external-calldata"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3ï¸âƒ£-å‡½æ•°ä½¿ç”¨external-calldata"}},[n._v("#")]),n._v(" 3ï¸âƒ£ å‡½æ•°ä½¿ç”¨"),t("code",[n._v("external")]),n._v(" + "),t("code",[n._v("calldata")])]),n._v(" "),t("p",[n._v("åœ¨åˆçº¦å¼€å‘ç§ï¼Œæ˜¾å¼å£°æ˜å‡½æ•°çš„å¯è§æ€§ä¸ä»…å¯ä»¥æé«˜æ™ºèƒ½åˆçº¦çš„å®‰å…¨æ€§ï¼ŒåŒæ—¶ä¹Ÿæœ‰åˆ©äºä¼˜åŒ–åˆçº¦æ‰§è¡Œçš„ gas æˆæœ¬ã€‚")]),n._v(" "),t("p",[n._v("ä¾‹å¦‚ï¼Œé€šè¿‡æ˜¾å¼åœ°æ ‡è®°å‡½æ•°ä¸ºå¤–éƒ¨å‡½æ•° "),t("code",[n._v("external")]),n._v("ï¼Œå¯ä»¥å¼ºåˆ¶å°†å‡½æ•°å‚æ•°çš„å­˜å‚¨ä½ç½®è®¾ç½®ä¸º calldataï¼Œè¿™ä¼šèŠ‚çº¦æ¯æ¬¡å‡½æ•°æ‰§è¡Œæ—¶æ‰€éœ€çš„ä»¥å¤ªåŠ gas æˆæœ¬ã€‚")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ a       :   22965\n    // è¾“å…¥ abc     :   22989\n    // è¾“å…¥ hello   :   23013\n    // å¹³å‡å€¼: (22965+22989+23013)/3 = 22989\n    function test1(string memory _str) public pure returns (string memory) {\n        return _str;\n    }\n\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ a       :   22943\n    // è¾“å…¥ abc     :   22967\n    // è¾“å…¥ hello   :   22991\n    // å¹³å‡å€¼: (22943+22967+22991)/3 = 22967\n    function test2(string memory _str) external pure returns (string memory) {\n        return _str;\n    }\n\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ a       :   22705\n    // è¾“å…¥ abc     :   22729\n    // è¾“å…¥ hello   :   22753\n    // å¹³å‡å€¼: (22705+22729+22753)/3 = 22729 âœ… å¹³å‡å€¼æœ€ä½\n    function test3(string calldata _str) external pure returns (string memory) {\n        return _str;\n    }\n}\n")])])]),t("p",[n._v("æ³¨æ„è¿™ç§æ–¹æ³•åªå¯¹ "),t("code",[n._v("memory")]),n._v(" ç±»å‹çš„æ•°æ®æœ‰æ•ˆï¼Œå¦‚æœæ˜¯æ“ä½œæ™®é€šçš„ç±»å‹ï¼Œå¯è§æ€§æ²¡æœ‰å½±å“ã€‚å¦‚ä¸‹ä¾‹å­æˆ‘å°†ä¸Šé¢çŸ­è·¯æ“ä½œä¾‹å­ä¸­ "),t("code",[n._v("external")]),n._v(" æ”¹ä¸º "),t("code",[n._v("public")]),n._v(",æ‰€æ¶ˆè€—çš„ gas å¹¶æ²¡æœ‰ä»»ä½•å½±å“")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ 1:   22050  | æ”¹ä¸º public å: 22050\n    // è¾“å…¥ 2:   22065  | æ”¹ä¸º public å: 22065\n    // è¾“å…¥ 101: 22050  | æ”¹ä¸º public å: 22050\n    // è¾“å…¥ 102: 22055  | æ”¹ä¸º public å: 22055\n    // å¹³å‡å€¼: (22050+22065+22050+22055)/4 = 22055\n    function test1(uint256 _amount) public pure returns (bool) {\n        bool isEven = _amount % 2 == 0;\n        bool isLessThan99 = _amount < 99;\n        if (isEven && isLessThan99) {\n            return true;\n        }\n        return false;\n    }\n\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ 1:   22040  | æ”¹ä¸º public å: 22040\n    // è¾“å…¥ 2:   22061  | æ”¹ä¸º public å: 22061\n    // è¾“å…¥ 101: 22040  | æ”¹ä¸º public å: 22040\n    // è¾“å…¥ 102: 22051  | æ”¹ä¸º public å: 22051\n    // å¹³å‡å€¼: (22040+22061+22040+22051)/4 = 22048\n    function test2(uint256 _amount) public pure returns (bool) {\n        if (_amount % 2 == 0 && _amount < 99) {\n            return true;\n        }\n        return false;\n    }\n\n    // gaså€¼å¦‚ä¸‹\n    // è¾“å…¥ 1:   22073  | æ”¹ä¸º public å: 22073\n    // è¾“å…¥ 2:   22083  | æ”¹ä¸º public å: 22083\n    // è¾“å…¥ 101: 21881  | æ”¹ä¸º public å: 21881\n    // è¾“å…¥ 102: 21881  | æ”¹ä¸º public å: 21881\n    // å¹³å‡å€¼: (22073+22083+21881+21881)/4 = 21979.5 âœ… å¹³å‡å€¼æœ€ä½\n    function test3(uint256 _amount) public pure returns (bool) {\n        if (_amount < 99 && _amount % 2 == 0) {\n            return true;\n        }\n        return false;\n    }\n}\n")])])]),t("h2",{attrs:{id:"_4ï¸âƒ£-ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4ï¸âƒ£-ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç±»å‹"}},[n._v("#")]),n._v(" 4ï¸âƒ£ ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç±»å‹")]),n._v(" "),t("p",[n._v("æœ‰äº›æ•°æ®ç±»å‹è¦æ¯”å¦å¤–ä¸€äº›æ•°æ®ç±»å‹çš„ gas æˆæœ¬é«˜ã€‚æˆ‘ä»¬æœ‰å¿…è¦äº†è§£å¯ç”¨æ•°æ®ç±»å‹çš„ gas åˆ©ç”¨æƒ…å†µï¼Œä»¥ä¾¿æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©æ•ˆç‡æœ€é«˜çš„é‚£ç§ã€‚ä¸‹é¢æ˜¯å…³äºæ•°æ®ç±»å‹ gas æ¶ˆè€—æƒ…å†µçš„ä¸€äº›è§„åˆ™ï¼š")]),n._v(" "),t("ul",[t("li",[n._v("åœ¨ä»»ä½•å¯ä»¥ä½¿ç”¨ "),t("code",[n._v("uint256")]),n._v(" ç±»å‹çš„æƒ…å†µä¸‹ï¼Œä¸è¦ä½¿ç”¨ "),t("code",[n._v("string")]),n._v(" ç±»å‹")]),n._v(" "),t("li",[n._v("å­˜å‚¨ "),t("code",[n._v("uint256")]),n._v(" è¦æ¯”å­˜å‚¨ "),t("code",[n._v("uint8")]),n._v(" çš„ gas æˆæœ¬ä½ï¼Œä¸ºä»€ä¹ˆï¼Ÿç‚¹å‡»è¿™é‡Œ "),t("a",{attrs:{href:"https://ethereum.stackexchange.com/questions/3067/why-does-uint8-cost-more-gas-than-uint256",target:"_blank",rel:"noopener noreferrer"}},[n._v("æŸ¥çœ‹åŸæ–‡"),t("OutboundLink")],1)]),n._v(" "),t("li",[n._v("å½“å¯ä»¥ä½¿ç”¨ "),t("code",[n._v("bytes32")]),n._v(" ç±»å‹æ—¶ï¼Œä¸è¦ä½¿ç”¨"),t("code",[n._v("byte[]")]),n._v(" ç±»å‹")]),n._v(" "),t("li",[n._v("å¦‚æœ "),t("code",[n._v("bytes32")]),n._v(" çš„é•¿åº¦æœ‰å¯ä»¥é¢„è®¡çš„ä¸Šé™ï¼Œé‚£ä¹ˆå°½å¯èƒ½æ”¹ç”¨ "),t("code",[n._v("bytes1")]),n._v("~"),t("code",[n._v("bytes32")]),n._v(" è¿™äº›å…·æœ‰å›ºå®šé•¿åº¦çš„ç±»å‹")]),n._v(" "),t("li",[t("code",[n._v("bytes32")]),n._v(" æ‰€éœ€çš„ gas æˆæœ¬è¦ä½äº "),t("code",[n._v("string")]),n._v(" ç±»å‹")]),n._v(" "),t("li",[t("code",[n._v("bool > unit256 > uint8 > bytes1 > bytes32 > bytes > string")])])]),n._v(" "),t("h3",{attrs:{id:"å­˜å‚¨å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å­˜å‚¨å¯¹æ¯”"}},[n._v("#")]),n._v(" å­˜å‚¨å¯¹æ¯”")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    uint256 public test3 = 0; // 23494\n    uint8 public test1 = 0; // 23554\n    bool public test2 = false; // 23630\n    bytes1 public test4 = 0x30; // 23601\n    // 23516\n    bytes32 public test5 =\n        0x3000000000000000000000000000000000000000000000000000000000000000;\n    string public test7 = "0"; // 24487\n    bytes public test6 = bytes("0"); // 24531\n}\n')])])]),t("h3",{attrs:{id:"è¿”å›å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿”å›å¯¹æ¯”"}},[n._v("#")]),n._v(" è¿”å›å¯¹æ¯”")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    // uint256 :21415\n    function test1() external pure returns (uint256) {\n        return 0;\n    }\n\n    // uint8 : 21444\n    function test2() external pure returns (uint8) {\n        return 0;\n    }\n\n    // bool :21400\n    function test3() external pure returns (bool) {\n        return false;\n    }\n\n    // bytes1 :21479\n    function test4() external pure returns (bytes1) {\n        return 0x30;\n    }\n\n    // bytes32 :21430\n    function test5() external pure returns (bytes32) {\n        return\n            0x3000000000000000000000000000000000000000000000000000000000000000;\n    }\n\n    // bytes :21845\n    function test6() external pure returns (bytes memory) {\n        return bytes("0");\n    }\n\n    // string :21801\n    function test7() external pure returns (string memory) {\n        return "0";\n    }\n}\n')])])]),t("h2",{attrs:{id:"_5ï¸âƒ£-å¾ªç¯ä¸­ä¸æ“ä½œ-storage-å˜é‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5ï¸âƒ£-å¾ªç¯ä¸­ä¸æ“ä½œ-storage-å˜é‡"}},[n._v("#")]),n._v(" 5ï¸âƒ£ å¾ªç¯ä¸­ä¸æ“ä½œ "),t("code",[n._v("storage")]),n._v(" å˜é‡")]),n._v(" "),t("p",[n._v("ç®¡ç† storage å˜é‡çš„ gas æˆæœ¬è¦è¿œè¿œé«˜äºå†…å­˜å˜é‡ï¼Œæ‰€ä»¥è¦é¿å…åœ¨å¾ªç¯ä¸­æ“ä½œ storage å˜é‡ã€‚")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    uint256 public num = 0;\n\n    // è¾“å…¥ 5 : 46475 gas\n    function test1(uint256 x) public {\n        for (uint256 i = 0; i < x; i++) {\n            num += 1;\n        }\n    }\n\n    // è¾“å…¥ 5 : 45651 gas\n    function test2(uint256 x) public {\n        uint256 temp = num;\n        for (uint256 i = 0; i < x; i++) {\n            temp += 1;\n        }\n        num = temp;\n    }\n}\n")])])]),t("h2",{attrs:{id:"_6ï¸âƒ£-å¾ªç¯ä¸­çš„ä¸é‡å¤è®¡ç®—æ•°æ®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6ï¸âƒ£-å¾ªç¯ä¸­çš„ä¸é‡å¤è®¡ç®—æ•°æ®"}},[n._v("#")]),n._v(" 6ï¸âƒ£ å¾ªç¯ä¸­çš„ä¸é‡å¤è®¡ç®—æ•°æ®")]),n._v(" "),t("ul",[t("li",[n._v("èƒ½ä¸åœ¨å¾ªç¯ä¸­æ“ä½œçš„æ•°æ®ï¼Œå°±å°½é‡æ”¾åœ¨å¤–é¢è®¡ç®—")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    uint256 a = 4;\n    uint256 b = 5;\n\n    function repeatedComputations(uint256 x) public view returns (uint256) {\n        uint256 sum = 0;\n        for (uint256 i = 0; i <= x; i++) {\n            sum = sum + a * b;\n        }\n    }\n}\n\n")])])]),t("h2",{attrs:{id:"_7ï¸âƒ£-å°½é‡å°‘ç”¨å¾ªç¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7ï¸âƒ£-å°½é‡å°‘ç”¨å¾ªç¯"}},[n._v("#")]),n._v(" 7ï¸âƒ£ å°½é‡å°‘ç”¨å¾ªç¯")]),n._v(" "),t("p",[t("strong",[n._v("å¤šä¸ªå¾ªç¯å¯ä»¥åˆå¹¶å°±å°½é‡åˆå¹¶ï¼Œå¾ªç¯å°½é‡ä¸ç”¨")])]),n._v(" "),t("p",[n._v("æœ‰æ—¶å€™åœ¨ Solidity æ™ºèƒ½åˆçº¦ä¸­ï¼Œä½ ä¼šå‘ç°ä¸¤ä¸ªå¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ä¸€è‡´ï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹å°±æ²¡æœ‰ç†ç”±ä¸åˆå¹¶å®ƒä»¬ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»¥å¤ªåŠåˆçº¦ä»£ç ï¼š")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    function loopFusion(uint256 x, uint256 y) public pure returns (uint256) {\n        for (uint256 i = 0; i < 100; i++) {\n            x += 1;\n        }\n        for (uint256 i = 0; i < 100; i++) {\n            y += 1;\n        }\n        return x + y;\n    }\n}\n")])])]),t("h2",{attrs:{id:"_8ï¸âƒ£-å¯é¢„æµ‹çš„ç»“æœ-ä¸é€šè¿‡ä»£ç è®¡ç®—ã€‚"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8ï¸âƒ£-å¯é¢„æµ‹çš„ç»“æœ-ä¸é€šè¿‡ä»£ç è®¡ç®—ã€‚"}},[n._v("#")]),n._v(" 8ï¸âƒ£ å¯é¢„æµ‹çš„ç»“æœ,ä¸é€šè¿‡ä»£ç è®¡ç®—ã€‚")]),n._v(" "),t("p",[n._v("å¦‚æœä¸€ä¸ªå¾ªç¯è®¡ç®—çš„ç»“æœæ˜¯æ— éœ€ç¼–è¯‘æ‰§è¡Œä»£ç å°±å¯ä»¥é¢„æµ‹çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦ä½¿ç”¨å¾ªç¯ï¼Œè¿™å¯ä»¥å¯è§‚åœ°èŠ‚çœ gasã€‚")]),n._v(" "),t("p",[n._v("ä¾‹å¦‚ä¸‹é¢çš„ä»¥å¤ªåŠåˆçº¦ä»£ç å°±å¯ä»¥ç›´æ¥è®¾ç½® num å˜é‡çš„å€¼ï¼š")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Demo {\n    function constantOutcome() public pure returns (uint256) {\n        uint256 num = 0;\n        for (uint256 i = 0; i < 100; i++) {\n            num += 1;\n        }\n        return num;\n    }\n}\n\n")])])]),t("h2",{attrs:{id:"_9ï¸âƒ£-é¿å…æ­»ä»£ç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9ï¸âƒ£-é¿å…æ­»ä»£ç "}},[n._v("#")]),n._v(" 9ï¸âƒ£ é¿å…æ­»ä»£ç ")]),n._v(" "),t("p",[n._v("æ­»ä»£ç ï¼ˆDead codeï¼‰æ˜¯æŒ‡é‚£äº›æ°¸è¿œä¹Ÿä¸ä¼šæ‰§è¡Œçš„ Solidity ä»£ç ï¼Œä¾‹å¦‚é‚£äº›æ‰§è¡Œæ¡ä»¶æ°¸è¿œä¹Ÿä¸å¯èƒ½æ»¡è¶³çš„ä»£ç ï¼Œå°±åƒä¸‹é¢çš„ä¸¤ä¸ªè‡ªç›¸çŸ›ç›¾çš„æ¡ä»¶åˆ¤æ–­é‡Œçš„ä»£ç å—ï¼Œæ¶ˆè€—äº†ä»¥å¤ªåŠ gas èµ„æºä½†æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼š")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("if (x < 1) {\n    if (x > 2) {\n        return x;\n    }\n}\n")])])]),t("h2",{attrs:{id:"ğŸ”Ÿ-é¿å…ä¸å¿…è¦çš„åˆ¤æ–­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”Ÿ-é¿å…ä¸å¿…è¦çš„åˆ¤æ–­"}},[n._v("#")]),n._v(" ğŸ”Ÿ é¿å…ä¸å¿…è¦çš„åˆ¤æ–­")]),n._v(" "),t("p",[n._v("æœ‰äº›æ¡ä»¶æ–­è¨€çš„ç»“æœä¸éœ€è¦ä»£ç çš„æ‰§è¡Œå°±å¯ä»¥äº†è§£ï¼Œé‚£ä¹ˆè¿™æ ·çš„æ¡ä»¶åˆ¤æ–­å°±å¯ä»¥ç²¾ç®€æ‰ã€‚ä¾‹å¦‚ä¸‹é¢çš„ Solidity åˆçº¦ä»£ç ä¸­çš„ä¸¤çº§åˆ¤æ–­æ¡ä»¶ï¼Œæœ€å¤–å±‚çš„åˆ¤æ–­æ˜¯åœ¨æµªè´¹å®è´µçš„ä»¥å¤ªåŠ gas èµ„æºï¼š")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v(" if(x < 1) {\n    if(x < 0) {\n      return x;\n    }\n  }\n")])])]),t("h2",{attrs:{id:"_1ï¸âƒ£-åˆ é™¤ä¸å¿…è¦çš„åº“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1ï¸âƒ£-åˆ é™¤ä¸å¿…è¦çš„åº“"}},[n._v("#")]),n._v(" 1ï¸âƒ£ åˆ é™¤ä¸å¿…è¦çš„åº“")]),n._v(" "),t("p",[n._v("åœ¨å¼€å‘ Solidity æ™ºèƒ½åˆçº¦æ—¶ï¼Œæˆ‘ä»¬å¼•å…¥çš„åº“é€šå¸¸åªéœ€è¦ç”¨åˆ°å…¶ä¸­çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€å…¶ä¸­å¯èƒ½ä¼šåŒ…å«å¤§é‡å¯¹äºæˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦è€Œè¨€æ˜¯å†—ä½™ä»£ç ã€‚å¦‚æœå¯ä»¥åœ¨è‡ªå·±çš„åˆçº¦é‡Œå®‰å…¨æœ‰æ•ˆåœ°å®ç°æ‰€ä¾èµ–çš„åº“åŠŸèƒ½ï¼Œé‚£ä¹ˆå°±èƒ½å¤Ÿè¾¾åˆ°ä¼˜åŒ–åˆçº¦çš„ gas åˆ©ç”¨çš„ç›®çš„ã€‚")]),n._v(" "),t("p",[n._v("ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ solidity ä»£ç ä¸­ï¼Œæˆ‘ä»¬çš„ä»¥å¤ªåŠåˆçº¦åªæ˜¯ç”¨åˆ°äº† SafeMath åº“çš„ add æ–¹æ³•ï¼š")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("import './SafeMath.sol' as SafeMath;\n\ncontract SafeAddition {\n  function safeAdd(uint a, uint b) public pure returns(uint) {\n    return SafeMath.add(a, b);\n  }\n}\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('contract SafeAddition {\n  function safeAdd(uint a, uint b) public pure returns(uint) {\n    uint c = a + b;\n    require(c >= a, "Addition overflow");\n    return c;\n  }\n}\n')])])]),t("h2",{attrs:{id:"ğŸ†—-ä¼˜åŒ–æ¡ˆä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ†—-ä¼˜åŒ–æ¡ˆä¾‹"}},[n._v("#")]),n._v(" ğŸ†— ä¼˜åŒ–æ¡ˆä¾‹")]),n._v(" "),t("p",[n._v("æœ¬ç¯‡ä¸»è¦ä»‹ç» gas çš„ä¼˜åŒ–ã€‚")]),n._v(" "),t("ul",[t("li",[n._v("å‡½æ•°è¾“å…¥å‚æ•°:ä½¿ç”¨ "),t("code",[n._v("calldata")]),n._v(" ï¼Œä¸ä½¿ç”¨ "),t("code",[n._v("memory")]),n._v("ã€‚")]),n._v(" "),t("li",[n._v("è¯»å–çŠ¶æ€å˜é‡:ä½¿ç”¨ã€‚")]),n._v(" "),t("li",[n._v("ä½¿ç”¨æ•°ç»„æ—¶å€™:\n"),t("ul",[t("li",[n._v("for å¾ªç¯æ—¶ï¼Œç¼“å­˜æ•°ç»„é•¿åº¦")]),n._v(" "),t("li",[n._v("å‚¨å­˜æ•°ç»„çš„å…ƒç´ åˆ° "),t("code",[n._v("memory")]),n._v("ã€‚")])])]),n._v(" "),t("li",[n._v("short circuit: "),t("code",[n._v("&&")]),n._v(" çŸ­è·¯æ“ä½œ\n"),t("ul",[t("li",[t("code",[n._v("A && B")]),n._v(",A è¡¨è¾¾å¼ ä¸æˆç«‹ï¼Œåˆ™ä¸è®¡ç®— B è¡¨è¾¾å¼")])])]),n._v(" "),t("li",[n._v("loop increments")])]),n._v(" "),t("p",[n._v("ä¸‹é¢é»˜è®¤çš„ Gas æ˜¯ 50518 gas")]),n._v(" "),t("p",[t("strong",[n._v("åŸå§‹ä»£ç :")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Gas {\n    uint256 public total;\n\n    // [1,2,3,4,5,100]\n    function demo(uint256[] memory nums) external {\n        for (uint256 index = 0; index < nums.length; index++) {\n            bool isEven = nums[index] % 2 == 0;\n            bool isLessThan99 = nums[index] < 99;\n            if (isEven && isLessThan99) {\n                total += nums[index];\n            }\n        }\n    }\n}\n/**\n  * é»˜è®¤: 50518 gas\n  */\n")])])]),t("p",[t("strong",[n._v("ä¼˜åŒ–å")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\n\ncontract Gas {\n    uint256 public total;\n\n    // [1,2,3,4,5,100]\n    function demo(uint256[] calldata nums) external {\n        uint256 _total = total;\n        uint256 len = nums.length;\n        for (uint256 index = 0; index < len; ++index) {\n            uint256 num = nums[index];\n            if (num % 2 == 0 && num < 99) {\n                _total += num;\n            }\n        }\n        total = _total;\n    }\n}\n\n/**\n * é»˜è®¤ => 50518 gas\n * 1. å‡½æ•°å‚æ•°ä¸ä½¿ç”¨ memoryï¼Œæ”¹ç”¨ calldata\n *      => 48773    èŠ‚çœäº† 1745\n * 2. çŠ¶æ€å˜é‡åœ¨å‡½æ•°å†…ä¸æ¯æ¬¡éƒ½è¯»å–å’Œä¿®æ”¹ï¼Œç¼“å­˜åˆ°å†…å­˜é‡Œï¼Œç»Ÿä¸€ä¿®æ”¹\n *      => 48562    èŠ‚çœäº† 211\n * 3. çŸ­è·¯(æ¡ä»¶ &&)\n *      => 48244    èŠ‚çœäº† 318\n * 4. å¾ªç¯å¢é‡ i++ æ”¹ä¸º ++i\n *      => 48214    èŠ‚çœäº† 30\n * 5. å¾ªç¯æ—¶ï¼Œç¼“å­˜æ•°ç»„çš„é•¿åº¦ uint256 len = nums.length;\n *      => 48179    èŠ‚çœäº† 35\n * 6. æ•°ç»„çš„å…ƒç´ ï¼Œæå‰ç¼“å­˜ï¼Œä¸é‡å¤è¯»å–\n *      => 48017    èŠ‚çœäº† 162\n *\n */\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);